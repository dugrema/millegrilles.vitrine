{"version":3,"sources":["components/i18n.js","components/ChampMultilingue.js","components/ReactFormatters.js","containers/Posts.js","containers/CardLayouts.js","containers/Site.js","containers/Menu.js","containers/Layout.js","containers/Sections.js","containers/App.js","serviceWorker.js","index.js","manifest.build.js"],"names":["i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","keySeparator","backend","loadPath","interpolation","escapeValue","format","value","lng","Date","moment","locale","isNaN","Number","toFixed","ChampMultilingue","props","langue","rootProps","language","contenu","DateFormatter","date_default","datetime_default","datemonthhour_default","timezone_default","date","tz","this","FileSizeFormatter","kb","mb","gb","tb","precision","nbBytes","result","unite","toPrecision","nb","className","React","Component","DateTimeFormatter","title","dernierChangementRendered","s","dateformatter","maintenant","Math","floor","now","dateChangement","format_datetime","dernierChangementDepuis","max","renderDernierChangement","DateTimeAfficher","dateFormattee","Post","state","err","detailPost","eventMajPost","messagePosts","postId","post_id","postList","liste_posts","filter","item","length","post","certificateStore","verifierSignatureMessage","_certificat","setState","urlPost","substring","axios","get","then","reponse","data","Error","catch","console","error","socket","on","off","Alert","variant","html","siteConfiguration","languages","contenuPost","parse","afficherDate","estampille","Row","Col","md","CardDeckMapping","cards","renderedCards","map","card","colIdx","cardImage","cardTitle","image_url","Card","Img","src","titre","Title","sous_titre","style","width","Body","CardDeck","SiteAccueil","accueil","rangee","idx","RangeeAccueil","SiteBlogPost","section","posts","layout","Menu","useTranslation","t","titreSite","changerLangue","Nav","Link","onClick","changerLanguage","Navbar","collapseOnSelect","expand","bg","fixed","Brand","href","Toggle","aria-controls","Collapse","id","changerPage","MenuItems","param","info","currentTarget","mappingSections","sections","MenuItemSection","sectionIdx","activeKey","onSelect","Item","eventKey","Trans","entete","LayoutMillegrilles","Entete","Contenu","page","Footer","Container","idmg","manifest","fluid","sm","values","version","Section","type","AffichageBlogposts","SectionFichiers","collections","collectionId","setCollectionId","event","chargerCollections","AfficherCollections","SectionAlbums","imageFuuid","dataset","uuid","debug","setImageFuuid","fuuid","Button","AffichageImageSimpleAlbum","collection","AffichageImagesAlbum","AfficherAlbums","sort","a","b","na","nom_collection","localeCompare","c","AfficherCollection","copieFichiers","fichiers","f","nom_fichier","fichiersRendered","Fichier","fichier","url","lg","taille","date_version","collectionsRendered","AfficherCollectionAlbum","CardColumns","mimetype","startsWith","fuuidPreview","fuuid_preview","border","data-uuid","imagesRendered","AfficherImageAlbum","data-fuuid","toutesCollections","toutes_collections","reponseToutesCollections","messageToutesCollections","liste_collections","promises","forEach","subfolder","push","Promise","all","resultatsAxios","resultats","MG_SOCKETIO_URL","MAPPING_PAGES","_App","nomDomaine","infoVitrine","connecterSocketIo","connexionSocketIo","openSocket","path","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","deconnexionSocketIo","eventMajSite","eventMajCollection","site","split","_","langueCourante","langueProchaine","languesDifferentes","document","changeLanguage","chargerSite","chargerCertificateStore","window","location","_chargerSite","includes","caPromise","infoPromise","resultat","caPem","idmgVitrine","idmgMillegrille","calculerIdmg","preparerCertificateStore","BaseLayout","LayoutAccueil","affichage","Page","goHome","AppWithTranslation","withTranslation","App","fallback","sousMenuApplication","domaineUrl","method","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.ec27977a.chunk.js","sourcesContent":["import i18n from \"i18next\";\nimport Backend from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { initReactI18next } from \"react-i18next\";\n\nimport moment from 'moment';\n\n// the translations\nimport 'moment/locale/fr'\n// import fr from './vitrine.fr.json';\n// import en from './vitrine.en.json';\n// const resources = {fr, en};\n\nfunction formatterValeur(value, format, lng) {\n  if(value instanceof Date) {\n    return moment(value).locale(lng).format(format);\n  } else if(!isNaN(value) && !isNaN(format)) {\n    return Number(value).toFixed(format);\n  }\n\n  return value;\n}\n\ni18n\n  .use(Backend)\n  .use(LanguageDetector)\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    // resources,\n    fallbackLng: 'fr',\n\n    // debug: true,\n\n    keySeparator: '.', // we use keys in form messages.welcome\n\n    backend: {\n      loadPath: '/vitrine/locales/{{lng}}/{{ns}}.json',\n    },\n\n    interpolation: {\n      escapeValue: false, // react is already safe from xss,\n      format: formatterValeur\n    }\n  });\n\nexport default i18n;\n","\nexport function ChampMultilingue(props) {\n  const langue = props.rootProps.language\n  return props.contenu[langue] || ''\n}\n","import React from 'react';\nimport moment from 'moment-timezone';\n\nclass DateFormatter {\n\n  date_default = 'YYYY/MM/DD';\n  datetime_default = 'YYYY/MM/DD HH:mm:ss';\n  datemonthhour_default  = 'MMM-DD HH:mm:ss';\n\n  timezone_default = 'America/Toronto';\n\n  format_date(date) {\n    // On assume que la date est en secondes (epoch).\n    return moment(date*1000).tz(this.timezone_default).format(this.date_default);\n  }\n\n  format_datetime(date) {\n    // On assume que la date est en secondes (epoch).\n    return moment(date*1000).tz(this.timezone_default).format(this.datetime_default);\n  }\n\n  format_monthhour(date) {\n    // On assume que la date est en secondes (epoch).\n    return moment(date*1000).tz(this.timezone_default).format(this.datemonthhour_default);\n  }\n\n}\n\n// class NumberFormatter {\n//   format_numberdecimals(number, decimals) {\n//     if(number) {\n//       return number.toFixed(decimals);\n//     }\n//     return;\n//   }\n// }\n\nexport class FileSizeFormatter extends React.Component {\n\n  constructor() {\n    super()\n    this.kb = 1024;\n    this.mb = this.kb*1024;\n    this.gb = this.mb*1024;\n    this.tb = this.gb*1024;\n    this.precision = 3;\n  }\n\n  format(nbBytes) {\n    let result, unite;\n    if(nbBytes > this.tb) {\n      result = (nbBytes/this.tb).toPrecision(this.precision);\n      unite = 'Tb';\n    } else if(nbBytes > this.gb) {\n      result = (nbBytes/this.gb).toPrecision(this.precision);\n      unite = 'Gb';\n    } else if(nbBytes > this.mb) {\n      result = (nbBytes/this.mb).toPrecision(this.precision);\n      unite = 'Mb';\n    } else if(nbBytes > this.kb) {\n      result = (nbBytes/this.kb).toPrecision(this.precision);\n      unite = 'kb';\n    } else {\n      result = nbBytes;\n      unite = 'bytes';\n    }\n\n    return result + ' ' + unite;\n  }\n\n  render() {\n    const nb = this.props.nb\n    return (\n      <span className=\"filesize\">\n        {this.format(nb)}\n      </span>\n    );\n  }\n}\n\nexport class DateTimeFormatter extends React.Component {\n\n  renderDernierChangement() {\n    let date = this.props.date;\n\n    if(!date || date === '') {\n      // Date vide\n      return (<span title=\"\"></span>);\n    }\n\n    const dateformatter = new DateFormatter()\n\n    var maintenant = Math.floor(Date.now()/1000);\n    let dateChangement = dateformatter.format_datetime(date);\n    let dernierChangementDepuis = maintenant - date;\n    dernierChangementDepuis = Math.floor(dernierChangementDepuis / 60);\n\n    let dernierChangementRendered;\n    var s;  // Ajouter s (pluriels) au besoin\n    if(dernierChangementDepuis < 60) {\n      dernierChangementDepuis = Math.max(0, dernierChangementDepuis);\n      dernierChangementRendered = (<span title={dateChangement}>{dernierChangementDepuis} minutes</span>);\n    } else if (dernierChangementDepuis < 1440) {\n      dernierChangementDepuis = Math.floor(dernierChangementDepuis / 60);\n      if(dernierChangementDepuis > 1) s = 's';\n      dernierChangementRendered = (<span title={dateChangement}>{dernierChangementDepuis} heure{s}</span>);\n    } else if (dernierChangementDepuis < 43200) {\n      dernierChangementDepuis = Math.floor(dernierChangementDepuis / 1440);\n      if(dernierChangementDepuis > 1) s = 's';\n      dernierChangementRendered = (<span title={dateChangement}>{dernierChangementDepuis} jour{s}</span>);\n    } else if (dernierChangementDepuis < 525600) {\n      dernierChangementDepuis = Math.floor(dernierChangementDepuis / 43200);\n      dernierChangementRendered = (<span title={dateChangement}>{dernierChangementDepuis} mois</span>);\n    } else {\n      dernierChangementDepuis = Math.floor(dernierChangementDepuis / 525600);\n      if(dernierChangementDepuis > 1) s = 's';\n      dernierChangementRendered = (<span title={dateChangement}>{dernierChangementDepuis} annee{s}</span>);\n    }\n\n    return dernierChangementRendered;\n  }\n\n  render() {\n    return (\n      <span className=\"date\">\n        {this.renderDernierChangement()}\n      </span>\n    );\n  }\n\n}\n\nexport class DateTimeAfficher extends React.Component {\n\n  render() {\n    let date = this.props.date;\n\n    if(!date || date === '') {\n      // Date vide\n      return (<span title=\"\"></span>);\n    }\n\n    const dateformatter = new DateFormatter()\n    let dateFormattee = dateformatter.format_datetime(date);\n    return (\n      <span className=\"date\">\n        {dateFormattee}\n      </span>\n    );\n  }\n\n}\n","import React from 'react'\nimport axios from 'axios'\nimport parse from 'html-react-parser'\nimport {Alert, Row, Col} from 'react-bootstrap'\n\nimport {DateTimeFormatter, DateTimeAfficher} from '../components/ReactFormatters'\nimport {verifierSignatureMessage} from '@dugrema/millegrilles.common/lib/pki2'\n\nexport class Post extends React.Component {\n\n  state = {\n    err: '',\n    detailPost: ''\n  }\n\n  componentDidMount() {\n    // Charger contenu du post\n    // console.debug(\"Charger post %O\", this.props)\n    const informationRangee = this.props\n    const postId = informationRangee.post_id\n    const subFolder = postId.substring(0, 2) + '/'\n    const urlPost = '/vitrine/posts/' + subFolder + postId + '.json'\n    axios.get(urlPost).then(reponse=>{\n      const detailPost = reponse.data\n      // console.debug(\"Reponse detail post id : %O\", postId, detailPost)\n\n      const certificateStore = this.props.rootProps.certificateStore\n\n      // Valider contenu avec le certificat, idmg\n      if ( ! verifierSignatureMessage(detailPost, detailPost._certificat, certificateStore) ) {\n        throw new Error(\"Signature invalide\")\n      } else {\n        this.setState({detailPost})\n      }\n\n    }).catch(err=>{\n      console.error(\"Erreur chargement post : %O\", err)\n      this.setState({err: 'Post invalide ' + postId + ' : ' + err})\n    })\n\n    const socket = this.props.rootProps.socket\n    socket.on('majPost', this.eventMajPost)\n  }\n\n  componentWillUnmount() {\n    const socket = this.props.rootProps.socket\n    socket.off('majPost', this.eventMajPost)\n  }\n\n  eventMajPost = messagePosts => {\n    // console.debug(\"Post, une maj : %O\", messagePosts)\n    const postId = this.props.post_id\n    const postList = messagePosts.liste_posts.filter(item=>item.post_id === postId)\n    // console.debug(\"Reception post, post_id = %s, recu length correspond = %s\", postId, postList.length)\n\n    if(postList.length === 1) {\n      const post = postList[0]\n      const certificateStore = this.props.rootProps.certificateStore\n      if( verifierSignatureMessage(post, messagePosts._certificat, certificateStore) ) {\n        this.setState({detailPost: post})\n      }\n    }\n  }\n\n  render() {\n\n    if(this.state.err) {\n      return <Alert variant=\"warning\">{this.state.err}</Alert>\n    }\n\n    const detailPost = this.state.detailPost\n    if(!detailPost) return <p></p>\n\n    var language = this.props.rootProps.language\n    var html = detailPost.html[language]\n\n    // console.debug(\"Render html %s\", html)\n    if(!html) {\n      // Voir si on peut obtenir le contenu dans langue par defaut\n      const languages = this.props.rootProps.siteConfiguration.languages\n      language = languages[0]\n      html = detailPost.html[language]\n      if(!html) return <p> ... NO POST / PAS DE CONTENU ... </p>\n    }\n\n    const contenuPost = parse(html)\n\n    if(this.props.afficherDate) {\n      const estampille = detailPost['en-tete'].estampille\n      return (\n        <Row>\n          <Col md={2}>\n            <DateTimeFormatter date={estampille} />\n            <div>\n              <DateTimeAfficher date={estampille}/>\n            </div>\n          </Col>\n          <Col>{contenuPost}</Col>\n        </Row>\n      )\n    } else {\n      return contenuPost\n    }\n  }\n}\n","import React from 'react'\nimport {Card, CardDeck} from 'react-bootstrap'\n\nimport {Post} from './Posts'\n\nexport function CardDeckMapping(props) {\n  var cards = props.cards,\n      renderedCards = ''\n  if(cards) renderedCards = cards.map((card, colIdx)=>{\n\n    var cardImage = '', cardTitle = ''\n    if(card.image_url) {\n      cardImage = <Card.Img variant=\"top\" src={card.image_url} />\n    }\n    if(card.titre) {\n      cardTitle = <Card.Title>{card.titre}</Card.Title>\n    }\n    if(card.sous_titre) {\n      cardTitle = <Card.Title>{card.sous_titre}</Card.Title>\n    }\n\n    return (\n      <Card key={colIdx} style={{ width: '18rem' }}>\n        {cardImage}\n        <Card.Body>\n          {cardTitle}\n          <Post key={card.post_id}\n                rootProps={props.rootProps}\n                post_id={card.post_id} />\n        </Card.Body>\n      </Card>\n    )\n  })\n\n  return (\n    <>\n      <CardDeck>\n        {renderedCards}\n      </CardDeck>\n    </>\n  )\n}\n","import React from 'react'\nimport {Jumbotron, Row, Col} from 'react-bootstrap'\n\nimport {ChampMultilingue} from '../components/ChampMultilingue'\nimport {Post} from './Posts'\nimport {CardDeckMapping} from './CardLayouts'\n\nexport class SiteAccueil extends React.Component {\n  render() {\n    const rootProps = this.props.rootProps\n    const siteConfiguration = rootProps.siteConfiguration\n\n    const rangees = siteConfiguration.accueil.map((rangee, idx)=>{\n      return <RangeeAccueil key={idx} rootProps={rootProps} rangee={rangee} />\n    })\n\n    return rangees\n  }\n}\n\nexport function SiteBlogPost(props) {\n  const rootProps = props.rootProps\n\n  const siteConfiguration = rootProps.siteConfiguration,\n        section = props.section,\n        postsSection = props.section.posts\n\n  const rangees = postsSection.map((rangee, idx)=>{\n    return (\n      <RangeeAccueil key={idx} rootProps={rootProps} rangee={rangee} afficherDate={true} />\n    )\n  })\n\n  return rangees\n}\n\nfunction RangeeAccueil(props) {\n  // Determine le type de rangee, charge le component approprie\n  const rangee = props.rangee\n  if(rangee.layout === 'CardDeck') {\n    return <CardDeckMapping rootProps={props.rootProps} {...props.rangee} />\n  } else if(rangee.post_id) {\n    return <Post rootProps={props.rootProps} {...props.rangee} afficherDate={props.afficherDate} />\n  }\n}\n","import React from 'react'\nimport { Nav, Navbar, NavLink, NavItem, Dropdown } from 'react-bootstrap';\n\nimport { useTranslation, Trans } from 'react-i18next';\n\nimport {ChampMultilingue} from '../components/ChampMultilingue'\n\nexport function Menu(props) {\n  const { t, i18n } = useTranslation()\n\n  const rootProps = props.rootProps\n\n  var titreSite = '', changerLangue = ''\n  if(rootProps.siteConfiguration) {\n    if(rootProps.language && rootProps.siteConfiguration.titre) {\n      titreSite = rootProps.siteConfiguration.titre[rootProps.language]\n    }\n\n    const languages = rootProps.siteConfiguration.languages\n    if(languages && languages.length > 1) {\n      changerLangue = <Nav.Link onClick={props.rootProps.changerLanguage}>{t('menu.changerLangue')}</Nav.Link>\n    }\n  }\n\n  return (\n    <Navbar collapseOnSelect expand=\"md\" bg=\"info\" variant=\"dark\" fixed=\"top\">\n      <Navbar.Brand href='/vitrine'>\n        {titreSite}\n      </Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"responsive-navbar-menu\" />\n      <Navbar.Collapse id=\"responsive-navbar-menu\">\n        <MenuItems changerPage={props.changerPage} rootProps={props.rootProps}/>\n        <Nav className=\"justify-content-end\">\n          {changerLangue}\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  )\n}\n\nexport class MenuItems extends React.Component {\n\n  changerPage = param => {\n\n    // const params_split = param.split('/')\n    // var paramsAdditionnels = {}\n    // if(params_split.length > 1) {\n    //   for(let idx in params_split) {\n    //     if(idx === 0) continue\n    //     var paramCombine = params_split[idx]\n    //     var keyValue = paramCombine.split(':')\n    //     paramsAdditionnels[keyValue[0]] = keyValue[1]\n    //   }\n    // }\n\n    // Simuler un event avec value et dataset\n    const info = {\n      value: param,\n      // dataset: paramsAdditionnels,\n    }\n    this.props.changerPage({currentTarget: info})\n\n  }\n\n  render() {\n\n    const siteConfiguration = this.props.rootProps.siteConfiguration\n    const language = this.props.language\n\n    var mappingSections = ''\n    if(siteConfiguration.sections) {\n      mappingSections = siteConfiguration.sections.map((section, idx)=>{\n        return <MenuItemSection key={idx}\n                                section={section}\n                                sectionIdx={idx}\n                                rootProps={this.props.rootProps} />\n      })\n    }\n\n    return (\n      <Nav className=\"mr-auto\" activeKey={this.props.section} onSelect={this.changerPage}>\n\n        <Nav.Item>\n          <Nav.Link eventKey='SiteAccueil'>\n            <i className=\"fa fa-home\"/>{' '}<Trans>menu.Accueil</Trans>\n          </Nav.Link>\n        </Nav.Item>\n\n        {mappingSections}\n\n      </Nav>\n    )\n  }\n}\n\nfunction MenuItemSection(props) {\n\n  return (\n    <Nav.Item>\n      <Nav.Link eventKey={'section:' + props.sectionIdx}>\n          <ChampMultilingue rootProps={props.rootProps} contenu={props.section.entete} />\n      </Nav.Link>\n    </Nav.Item>\n  )\n\n}\n","import React from 'react'\nimport { Container, Row, Col} from 'react-bootstrap'\nimport { Trans } from 'react-i18next'\n\nimport { Menu } from './Menu'\n\nimport './Layout.css'\n\nexport class LayoutMillegrilles extends React.Component {\n\n  componentDidMount() {\n    // console.debug(\"App props:\\n%O\", this.props)\n  }\n\n  render() {\n    return (\n      <div className=\"flex-wrapper\">\n        <div>\n          <Entete changerPage={this.props.changerPage} rootProps={this.props.rootProps}/>\n          <Contenu page={this.props.page}/>\n        </div>\n        <Footer rootProps={this.props.rootProps}/>\n      </div>\n    )\n  }\n}\n\nfunction Entete(props) {\n  return (\n    <Container>\n      <Menu changerPage={props.changerPage} rootProps={props.rootProps}/>\n      <div className=\"body-top-padding\"></div>\n    </Container>\n  )\n}\n\nfunction Contenu(props) {\n  return (\n    <Container>\n      {props.page}\n    </Container>\n  )\n}\n\nfunction Footer(props) {\n\n  const idmg = props.rootProps.idmg\n  var qrCode = null\n\n  if(props.rootProps.idmg) {\n    // qrCode = <QRCode value={'idmg:' + idmg} size={75} />;\n  }\n\n  var manifest = ''\n  if(props.rootProps && props.rootProps.manifest) {\n    manifest = props.rootProps.manifest\n  }\n\n  return (\n    <Container fluid className=\"footer bg-info\">\n      <Row>\n        <Col sm={2} className=\"footer-left\"></Col>\n        <Col sm={8} className=\"footer-center\">\n          <div className=\"millegrille-footer\">\n            <div>IDMG : {idmg}</div>\n            <div>\n              <Trans>layout.coupdoeilAdvert</Trans>{' '}\n              <span title={manifest.date}>\n                <Trans values={{version: manifest.version}}>layout.coupdoeilVersion</Trans>\n              </span>\n            </div>\n          </div>\n        </Col>\n        <Col sm={2} className=\"footer-right\">{qrCode}</Col>\n      </Row>\n    </Container>\n  )\n}\n","import React from 'react'\nimport axios from 'axios'\nimport {Row, Col, CardColumns, Card, Button} from 'react-bootstrap'\n\nimport {ChampMultilingue} from '../components/ChampMultilingue'\nimport {verifierSignatureMessage} from '@dugrema/millegrilles.common/lib/pki2'\nimport { useTranslation, Trans } from 'react-i18next'\nimport {SiteBlogPost} from './Site'\nimport {DateTimeAfficher, FileSizeFormatter} from '../components/ReactFormatters'\n\nexport function Section(props) {\n  if(props.section.type === 'fichiers') {\n    return <SectionFichiers {...props} />\n  } else if(props.section.type === 'album') {\n    return <SectionAlbums {...props} />\n  } else if(props.section.type === 'blogposts') {\n    return <AffichageBlogposts {...props} />\n  }\n  return 'Section inconnue : ' + props.type\n}\n\nclass SectionFichiers extends React.Component {\n\n  state = {\n    collections: '',\n    collectionId: '',  // Id collection courante (affichee)\n  }\n\n  componentDidMount() {\n    const section = this.props.section\n    // console.debug(\"Section : %O\", section)\n\n    chargerCollections(section, this.props.rootProps).then(collections=>{\n      this.setState({collections})\n    })\n\n  }\n\n  setCollectionId = event => {\n    const collectionId = event.currentTarget.value\n    this.setState({collectionId})\n  }\n\n  render() {\n    const section = this.props.section\n\n    return (\n      <>\n        <h1>\n          <ChampMultilingue rootProps={this.props.rootProps} contenu={section.entete} />\n        </h1>\n\n        <AfficherCollections rootProps={this.props.rootProps} collections={this.state.collections}/>\n      </>\n    )\n  }\n}\n\nclass SectionAlbums extends React.Component {\n\n  state = {\n    collections: '',\n    collectionId: '',  // Id collection courante (affichee)\n    imageFuuid: '',\n  }\n\n  componentDidMount() {\n    const section = this.props.section\n    // console.debug(\"Section : %O\", section)\n\n    chargerCollections(section, this.props.rootProps).then(collections=>{\n      this.setState({collections})\n    })\n\n  }\n\n  setCollectionId = event => {\n    const collectionId = event.currentTarget.value || event.currentTarget.dataset.uuid\n    console.debug(\"Set collection ID : %s\", collectionId)\n    this.setState({collectionId})\n  }\n\n  setImageFuuid = event => {\n    const imageFuuid = event.currentTarget.value || event.currentTarget.dataset.fuuid\n    console.debug(\"Set image fuuid : %s\", imageFuuid)\n    this.setState({imageFuuid})\n  }\n\n  render() {\n    const section = this.props.section\n\n    var contenu = ''\n    if(this.state.imageFuuid) {\n      contenu = (\n        <>\n          <div>\n            <Button onClick={this.setImageFuuid}><Trans>global.retour</Trans></Button>\n            <br/>\n            <br/>\n          </div>\n          <AffichageImageSimpleAlbum rootProps={this.props.rootProps}\n                                     fuuid={this.state.imageFuuid} />\n        </>\n      )\n    } else if(this.state.collectionId) {\n      const collection = this.state.collections.filter(item=>item.uuid === this.state.collectionId)\n      contenu = (\n        <>\n          <div>\n            <Button onClick={this.setCollectionId}><Trans>global.retour</Trans></Button>\n            <br/>\n            <br/>\n          </div>\n          <AffichageImagesAlbum rootProps={this.props.rootProps}\n                                collection={collection[0]}\n                                setCollectionId={this.setCollectionId}\n                                setImageFuuid={this.setImageFuuid} />\n        </>\n      )\n    } else {\n      contenu = <AfficherAlbums rootProps={this.props.rootProps}\n                      collections={this.state.collections}\n                      setCollectionId={this.setCollectionId} />\n    }\n\n    return (\n      <>\n        <h1>\n          <ChampMultilingue rootProps={this.props.rootProps} contenu={section.entete} />\n        </h1>\n\n        {contenu}\n      </>\n    )\n  }\n}\n\nfunction AfficherCollections(props) {\n  const collections = props.collections\n\n  if(collections) {\n\n    collections.sort((a,b)=>{\n      const na=a.nom_collection, nb=b.nom_collection\n      return na.localeCompare(nb)\n    })\n\n    return props.collections.map((c, idx)=>{\n      return <AfficherCollection key={idx} rootProps={props.rootProps} collection={c} />\n    })\n  }\n  return ''\n}\n\nfunction AfficherCollection(props) {\n  const collection = props.collection\n  const fichiers = collection.fichiers\n\n  // Retirer les sous-collections (non supporte)\n  const copieFichiers = fichiers.filter(f=>f.nom_fichier)\n\n  // Trier fichiers par nom\n  copieFichiers.sort((a,b)=>{\n    const na=a.nom_fichier, nb=b.nom_fichier\n    return na.localeCompare(nb)\n  })\n\n  const fichiersRendered = copieFichiers.map(f=>{\n    return <Fichier key={f.uuid} rootProps={props.rootProps} fichier={f} />\n  })\n\n  return (\n    <>\n      <h2>\n        {collection.nom_collection}\n      </h2>\n      {fichiersRendered}\n    </>\n  )\n}\n\nfunction Fichier(props) {\n  const fichier = props.fichier\n  const url = '/fichiers/' + fichier.fuuid\n  return (\n    <Row>\n      <Col md={0} lg={1}></Col>\n      <Col sm={12} lg={6}>\n        <a href={url}>\n          {fichier.nom_fichier}\n        </a>\n      </Col>\n      <Col sm={5} lg={2} className=\"col-filesize\"><FileSizeFormatter nb={fichier.taille} /></Col>\n      <Col sm={7} lg={3}><DateTimeAfficher date={fichier.date_version}/></Col>\n    </Row>\n  )\n}\n\nfunction AfficherAlbums(props) {\n  const collections = props.collections\n\n  if(collections) {\n\n    collections.sort((a,b)=>{\n      const na=a.nom_collection, nb=b.nom_collection\n      return na.localeCompare(nb)\n    })\n\n    const collectionsRendered = props.collections.map((c, idx)=>{\n      return <AfficherCollectionAlbum key={idx} rootProps={props.rootProps}\n                                      collection={c}\n                                      setCollectionId={props.setCollectionId} />\n    })\n\n    return (\n      <CardColumns>\n        {collectionsRendered}\n      </CardColumns>\n    )\n  }\n  return ''\n}\n\nfunction AfficherCollectionAlbum(props) {\n  const collection = props.collection\n  const fichiers = collection.fichiers.filter(item=>{return item.mimetype && item.mimetype.startsWith('image/')})\n  console.debug(\"Collection %O\\nImages dans la collection : %O\", collection, fichiers)\n\n  var fuuidPreview = collection.fuuid_preview\n  if( !fuuidPreview && fichiers && fichiers.length > 0) {\n    fuuidPreview = fichiers[0].fuuid\n  }\n\n  return (\n    <Card border=\"secondary\"\n          onClick={props.setCollectionId}\n          data-uuid={collection.uuid}>\n      <Card.Img variant=\"top\" src={\"/fichiers/\" + fuuidPreview + \"?preview=1\"} />\n      <Card.Body>\n        <Card.Title>{collection.nom_collection}</Card.Title>\n      </Card.Body>\n    </Card>\n  )\n}\n\nfunction AffichageImagesAlbum(props) {\n  const collection = props.collection\n  const fichiers = collection.fichiers.filter(item=>{return item.mimetype && item.mimetype.startsWith('image/')})\n  fichiers.sort((a,b)=>{\n    const na=a.nom_fichier, nb=b.nom_fichier\n    return na.localeCompare(nb)\n  })\n\n  console.debug(\"Collection %O\\nImages dans la collection : %O\", collection, fichiers)\n  if(fichiers) {\n    const imagesRendered = fichiers.map((f, idx)=>{\n      return <AfficherImageAlbum key={idx} rootProps={props.rootProps}\n                                 fichier={f}\n                                 setImageFuuid={props.setImageFuuid} />\n    })\n\n    return (\n      <CardColumns>\n        {imagesRendered}\n      </CardColumns>\n    )\n  }\n  return ''\n}\n\nfunction AfficherImageAlbum(props) {\n  const fichier = props.fichier\n\n  var fuuidPreview = fichier.fuuid\n\n  return (\n    <Card border=\"secondary\"\n          data-fuuid={fichier.fuuid}\n          onClick={props.setImageFuuid}>\n      <Card.Img variant=\"top\" src={\"/fichiers/\" + fuuidPreview + \"?preview=1\"} />\n      <Card.Body>\n        <Card.Title>{fichier.nom_fichier}</Card.Title>\n      </Card.Body>\n    </Card>\n  )\n}\n\nfunction AffichageImageSimpleAlbum(props) {\n  const fuuidPreview = props.fuuid\n\n  return (\n    <img className=\"image-fullsize\" src={\"/fichiers/\" + fuuidPreview} />\n  )\n}\n\nfunction AffichageBlogposts(props) {\n  console.debug(\"Props info : %O\", props)\n  const section = props.section\n  return (\n    <>\n      <h2><ChampMultilingue contenu={section.entete} rootProps={props.rootProps}/></h2>\n      <SiteBlogPost {...props} />\n    </>\n  )\n}\n\nasync function chargerCollections(section, rootProps) {\n  var toutesCollections = section.toutes_collections === true,\n      collections = section.collections\n\n  if(toutesCollections) {\n    // console.debug(\"Charger toutes les collections\")\n    const reponseToutesCollections = await axios.get('/vitrine/listeCollections.json')\n    const messageToutesCollections = reponseToutesCollections.data\n    const certificateStore = rootProps.certificateStore\n    // Valider contenu avec le certificat, idmg\n    if ( ! verifierSignatureMessage(messageToutesCollections, messageToutesCollections._certificat, certificateStore) ) {\n      throw new Error(\"Signature invalide\")\n    }\n    collections = reponseToutesCollections.data.liste_collections\n  }\n\n  // console.debug(\"Charger collections %O\", collections)\n  var promises = []\n  collections.forEach(c=>{\n    const subfolder = c.substring(0, 2)\n    promises.push(axios.get('/vitrine/collections/' + subfolder + '/' + c + '.json'))\n  })\n  const resultatsAxios = await Promise.all(promises)\n  const resultats = resultatsAxios.map(c=>c.data)\n\n  // console.debug(\"Resultats : %O\", resultats)\n  return resultats\n}\n","import React, {Suspense} from 'react'\nimport './App.css'\nimport openSocket from 'socket.io-client'\nimport axios from 'axios'\n\nimport {preparerCertificateStore, verifierSignatureMessage} from '@dugrema/millegrilles.common/lib/pki2'\nimport {calculerIdmg} from '@dugrema/millegrilles.common/lib/forgecommon'\n\nimport '../components/i18n'\nimport { withTranslation } from 'react-i18next';\n\nimport { SiteAccueil } from './Site'\nimport { LayoutMillegrilles } from './Layout'\nimport { Section } from './Sections'\n\nimport manifest from '../manifest.build.js'\n\nconst MG_SOCKETIO_URL = '/vitrine/socket.io',\n      MAPPING_PAGES = {SiteAccueil}\n\nclass _App extends React.Component {\n\n  state = {\n    nomDomaine: '',\n    siteConfiguration: '',\n    language: '',\n    certificateStore: '',\n    idmg: '',\n    infoVitrine: '',\n\n    err: '',\n    section: '',\n    page: 'SiteAccueil',\n\n    socket: '',\n\n  }\n\n  componentDidMount() {\n    console.debug(\"Vitrine version %s, %s\", manifest.version, manifest.date)\n    this.chargerSite()\n    this.chargerCertificateStore()\n    this.connecterSocketIo()\n  }\n\n  async chargerSite() {\n    var language = this.props.i18n.language\n    const nomDomaine = window.location.href.split('/')[2].split(':')[0]\n\n    // Charger configuration du site associe au domaine\n    const siteConfiguration = await _chargerSite(nomDomaine)\n    // console.debug(\"Configuration site : %O\", siteConfiguration)\n\n    // Identifier le language de depart pour afficher la page\n    if(!language) {\n      language = siteConfiguration.languages[0]  // Utiliser le language par defaut (1er dans la liste)\n      this.props.i18n.changeLanguage(language)\n    } else {\n      // S'assurer que le language detecte existe pour le site\n      if( ! siteConfiguration.languages.includes(language) ) {\n        console.debug(\"Forcer changement de language, celui detecte dans le navigateur n'existe pas\")\n        language = siteConfiguration.languages[0]  // Utiliser le language par defaut (1er dans la liste)\n        this.props.i18n.changeLanguage(language)\n      }\n    }\n\n    document.title = siteConfiguration.titre[language]\n    this.setState({nomDomaine, siteConfiguration, language})\n  }\n\n\n  async chargerCertificateStore() {\n    // Preparer le certificate store avec le CA pour valider tous les .json telecharges\n    const caPromise = axios.get('/vitrine/millegrille.pem'),\n          infoPromise = axios.get('/vitrine/info.json')\n\n    const resultat = await Promise.all([caPromise, infoPromise])\n\n    const caPem = resultat[0].data,\n          infoVitrine = resultat[1].data\n\n    // console.debug(\"Info vitrine : %O\", infoVitrine)\n\n    // Valider le idmg - millegrille.pem === info.idmg\n    const idmgVitrine = infoVitrine.idmg,\n          idmgMillegrille = calculerIdmg(caPem)\n    if(idmgVitrine !== idmgMillegrille) {\n      throw new Error(\"Idmg de vitrine sur info.json ne correspond pas a millegrille.pem\")\n    }\n\n    // console.debug(\"PEM certificat de millegrille : \\n%s\", caPem)\n    const certificateStore = preparerCertificateStore(caPem)\n\n    // Valider la signatude de info.json\n    if( verifierSignatureMessage(infoVitrine, infoVitrine._certificat, certificateStore) ) {\n      this.setState({idmg: idmgVitrine, certificateStore})\n    } else {\n      console.error(\"Erreur verification info.json - signature invalide\")\n      this.setState({err: \"Erreur verification info.json - signature invalide\"})\n    }\n\n  }\n\n  connecterSocketIo = () => {\n    if( ! this.state.connexionSocketIo ) {\n      const socket = openSocket('/', {\n        path: MG_SOCKETIO_URL,\n        reconnection: true,\n        reconnectionAttempts: 5,\n        reconnectionDelay: 500,\n        reconnectionDelayMax: 30000,\n        randomizationFactor: 0.5\n      })\n      socket.on('disconnect', () => {this.deconnexionSocketIo()})\n\n      socket.on('majSite', this.eventMajSite)\n      socket.on('majCollection', this.eventMajCollection)\n\n      // Conserve socket, permet d'enregistrer listeners par component (post, collections, etc.)\n      this.setState({socket})\n\n    }\n  }\n\n  eventMajSite = site => {\n    console.debug(\"MAJ site %O\", site)\n    const certificateStore = this.state.certificateStore\n    if( verifierSignatureMessage(site, site._certificat, certificateStore) ) {\n      this.setState({siteConfiguration: site})\n    }\n  }\n\n  eventMajCollection = collection => {\n    console.debug(\"MAJ collection %O\", collection)\n  }\n\n  deconnexionSocketIo = () => {\n    console.debug(\"Deconnexion Socket.IO\")\n  }\n\n  changerPage = event => {\n    const value = event.currentTarget.value\n    // console.debug(\"Changer page %s\", value)\n\n    if(value.startsWith('section:')) {\n      const idx = Number(value.split(':')[1])\n      const section = this.state.siteConfiguration.sections[idx]\n      // Toggle la section, force le rechargement si on a plusieurs sections de meme type\n      this.setState({section: ''}, _=>{\n        this.setState({section})\n      })\n    } else if(MAPPING_PAGES[value]) {\n      this.setState({page: value, section: ''})\n    } else {\n      throw new Error(\"Page inconnue : \" + value)\n    }\n  }\n\n  changerLanguage = event => {\n    // console.debug(\"Changer language : %O\\n%O\", event, this.props)\n    const i18n = this.props.i18n,\n          siteConfiguration = this.state.siteConfiguration\n    const langueCourante = i18n.language\n    var langueProchaine = ''\n\n    // Trouver les language dans le site, toggle si juste 2\n    const languagesSite = siteConfiguration.languages\n    const languesDifferentes = languagesSite.filter(langue=>langue!==langueCourante)\n    if(languesDifferentes.length === 1) {\n      // Une seule langue differente, on la choisit\n      langueProchaine = languesDifferentes[0]\n    } else {\n      throw new Error(\"Langue switch - plusieurs langues candidates, il faut choisir\")\n    }\n\n    document.title = siteConfiguration.titre[langueProchaine]\n    this.props.i18n.changeLanguage(langueProchaine)\n    this.setState({language: langueProchaine})\n  }\n\n  render() {\n    var BaseLayout = LayoutAccueil\n\n    const rootProps = {\n      ...this.state,\n      changerLanguage: this.changerLanguage,\n      manifest,\n    }\n\n    var affichage = <p>Connexion en cours</p>\n    if(this.state.siteConfiguration && this.state.certificateStore && this.state.page) {\n      // BaseLayout = LayoutAccueil\n\n      if(this.state.section) {\n        affichage = <Section section={this.state.section} rootProps={rootProps} />\n      } else {\n        const Page = MAPPING_PAGES[this.state.page]\n        affichage = <Page rootProps={rootProps} />\n      }\n    }\n\n    return (\n      <BaseLayout\n        changerPage={this.changerPage}\n        affichage={affichage}\n        goHome={this.goHome}\n        rootProps={rootProps} />\n    )\n  }\n}\n\nconst AppWithTranslation = withTranslation()(_App)\n\nexport default function App(props) {\n  return (\n    <Suspense fallback={<p>Loading</p>}>\n      <AppWithTranslation />\n    </Suspense>\n  )\n}\n\n// Layout general de l'application\nfunction LayoutAccueil(props) {\n\n  return (\n    <LayoutMillegrilles\n      changerPage={props.changerPage}\n      page={props.affichage}\n      goHome={props.goHome}\n      sousMenuApplication={props.sousMenuApplication}\n      rootProps={props.rootProps} />\n  )\n\n}\n\nasync function _chargerSite(domaineUrl, language) {\n  const url = '/vitrine/sites/' + domaineUrl + '/index.json'\n  const reponse = await axios({method: 'get', url})\n  // console.debug(\"Reponse site : %O\", reponse)\n\n  const siteConfiguration = reponse.data\n\n  return siteConfiguration\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\n// import { ApplicationDev } from './AppDev';\nimport App from './containers/App';\nimport './components/i18n';\n\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","const build = {\n  date: '2020-11-26 01:21',\n  version: '1.35.0'\n}\nmodule.exports = build;\n"],"sourceRoot":""}